var raama=webpackJsonp_name_([3],{0:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(1),o=r(n),i=a(4),l=a(5),d=l.BrowserRouter,s=a(298);initData=JSON.parse(initData),userData=JSON.parse(userData),o.default.initData=initData,o.default.userData=userData,o.default.module="raama",o.default.pageName="Raamatupidamine",o.default.gridConfig=initData.docConfig,o.default.menu=initData.menu?initData.menu.data:[],o.default.keel="EST",i.hydrate(React.createElement(d,null,React.createElement(s,{initData:initData,userData:userData})),document.getElementById("doc"))},250:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),p=a(163),m=a(210),f=a(232),h=a(251),y=a(85).NOMENCLATURE,g=y.LIBRARIES,b=y.TAXIES,v=y.UHIK,w=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:"NOMENCLATURE",module:this.props.module,initData:this.props.initData,history:this.props.history,userData:this.props.userData,libs:g,renderer:this.renderer,focusElement:"input-kood"})}},{key:"renderer",value:function(e){if(!e.docData)return null;var t=e.state.edited;return l.createElement("div",null,l.createElement("div",{style:h.doc},l.createElement("div",{style:h.docRow},l.createElement("div",{style:h.docColumn},l.createElement(u,{title:"Kood ",name:"kood",ref:"input-kood",value:e.docData.kood,onChange:e.handleInputChange}),l.createElement(u,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",value:e.docData.nimetus,onChange:e.handleInputChange}),l.createElement(p,{title:"Maksumäär:",name:"vat",data:b,collId:"kood",value:e.docData.vat||"",defaultValue:e.docData.vat,ref:"select-vat",btnDelete:t,onChange:e.handleInputChange,readOnly:!t}),l.createElement(f,{title:"Hind: ",name:"hind",ref:"input-hind",value:+(e.docData.hind||null),readOnly:!t,onChange:e.handleInputChange}),l.createElement(p,{title:"Mõttühik:",name:"uhik",data:v,collId:"kood",value:e.docData.uhik||"",defaultValue:e.docData.uhik,ref:"select-uhik",btnDelete:t,onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:h.docRow},l.createElement("div",{style:h.docColumn},l.createElement(c,{title:"Kehtiv kuni:",name:"valid",value:e.docData.valid,ref:"input-valid",readOnly:!t,onChange:e.handleInputChange}))),l.createElement("div",{style:h.docRow},l.createElement(m,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!t}))))}}]),t}(l.PureComponent);w.propTypes={docId:d.number,initData:d.object,userData:d.object},w.defaultProps={initData:{},userData:{}},e.exports=w},251:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"}}},252:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(253),u="NOMENCLATURE",c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,ref:"register",module:this.props.module,docTypeId:u,style:s,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=c},253:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},274:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(275),u="ASUTUSED",c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:u,style:s,render:this.renderer})}},{key:"renderer",value:function(){return null}},{key:"handleClick",value:function(e){var t=this.refs.register;return t?void(e&&(t.setState({warning:"Edukalt:  "+e+": ",warningType:"ok"}),setTimeout(function(){t.fetchData("selectDocs")},1e4))):null}}]),t}(l.PureComponent);e.exports=c},275:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},276:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(1),u=a(217),c=a(206),p=a(210),m=a(277),f=a(174),h=a(237),y=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(u,{docId:this.state.docId,ref:"document",history:this.props.history,module:s.module,docTypeId:"ASUTUSED",initData:this.props.initData,renderer:this.renderer,focusElement:"input-regkood"})}},{key:"renderer",value:function(e){if(!e.docData||!e.docData.nimetus)return l.createElement("div",{style:m.doc},l.createElement(h,{label:"Laadimine..."}));var t=e.state.edited,a=e.docData.gridData,r=e.docData.gridConfig,n=e.docData.objects,o=e.docData.gridObjectsConfig;return l.createElement("div",{style:m.doc},l.createElement("div",{style:m.docRow},l.createElement("div",{style:m.docColumn},l.createElement(c,{title:"Reg.kood ",name:"regkood",ref:"input-regkood",readOnly:!t,value:e.docData.regkood||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",readOnly:!t,value:e.docData.nimetus||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Om.vorm",name:"omvorm",ref:"input-omvorm",readOnly:!t,value:e.docData.omvorm||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Arveldus arve:",name:"aa",ref:"input-aa",readOnly:!t,value:e.docData.aa||"",onChange:e.handleInputChange}))),l.createElement("div",{style:m.docRow},l.createElement(p,{title:"Aadress",name:"aadress",ref:"textarea-aadress",onChange:e.handleInputChange,value:e.docData.aadress||"",readOnly:!t})),l.createElement("div",{style:m.docRow},l.createElement(p,{title:"Kontakt",name:"kontakt",ref:"textarea-kontakt",onChange:e.handleInputChange,value:e.docData.kontakt||"",readOnly:!t})),l.createElement("div",{style:m.docRow},l.createElement(c,{title:"Telefon",name:"tel",ref:"input-tel",value:e.docData.tel||"",readOnly:!t,onChange:e.handleInputChange})),l.createElement("div",{style:m.docRow},l.createElement(c,{title:"Email",name:"email",ref:"input-email",value:e.docData.email||"",readOnly:!t,onChange:e.handleInputChange})),l.createElement("div",{style:m.docRow},l.createElement(p,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!t})),l.createElement("div",{style:m.docRow},l.createElement(p,{title:"Märkused",name:"mark",ref:"textarea-mark",onChange:e.handleInputChange,value:e.docData.mark||"",readOnly:!t})),l.createElement("div",{style:m.docRow},l.createElement("label",{ref:"label"},"Kasutaja objektid")),l.createElement("div",{style:m.docRow},l.createElement(f,{source:"objects",gridData:n,gridColumns:o,showToolBar:!1,readOnly:!0,style:m.grid.headerTable,docTypeId:"object",ref:"objects-data-grid"})),l.createElement("div",{style:m.docRow},l.createElement("label",{ref:"label"},"Kasutaja andmed")),l.createElement("div",{style:m.docRow},l.createElement(f,{source:"userid",gridData:a,gridColumns:r,showToolBar:!1,readOnly:!0,style:m.grid.headerTable,docTypeId:"userid",ref:"userid-data-grid"})))}}]),t}(l.PureComponent);y.propTypes={docId:d.number,initData:d.object,userData:d.object},y.defaultProps={initData:{},userData:{}},e.exports=y},277:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},291:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),p=a(232),m=a(163),f=(a(259),a(210)),h=a(174),y=(a(292),a(261)),g=a(178),b=a(237),v=a(294),w=a(295),k=a(76),D="SMK",E=a(1),C=[{id:"nomenclature",filter:"where dok in ('MK','SMK')"},{id:"asutused",filter:""},{id:"aa",filter:""}],O=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1,lapsId:null,module:a.props.module,isAskToCreateFromArv:!0,getSMK:!1,arvId:0,kas_aa_kasitsi:!1},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.modalPageBtnClick=a.modalPageBtnClick.bind(a),a.pages=[{pageName:"Sissemakse korraldus",docTypeId:"SMK"}],a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){if(this.props.history&&this.props.history.location.state){var e=this.props.history.location.state.lapsId,t=this.props.history.location.state.module?this.props.history.location.state.module:"lapsed";this.setState({lapsId:e,module:t})}}},{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:D,history:this.props.history,module:this.state.module,initData:this.props.initData,reload:!0,libs:C,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){if(!e||!e.docData||!e.docData.kpv)return l.createElement("div",{style:w.doc},l.createElement(b,{label:k("Laadimine...")}));var t=e.state.edited;e.docData.relations&&y(e);!e.docData.id||0===e.docData.id;e.docData.id&&0!==e.docData.id||!e.docData.arvid||!this.state.isAskToCreateFromArv||this.setState({getSMK:!0,isAskToCreateFromArv:!1,arvId:e.docData.arvid});var a=e.docData.queryArvTasu,r=e.docData.gridArvConfig;return e.docData.jaak&&(E.mkJaak=e.docData.jaak),l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:w.docRow},l.createElement("div",{style:w.docColumn},l.createElement(u,{title:"Number",name:"number",value:(e.docData.number||"")+"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv||"01-07-2020",ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(m,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:+e.docData.aa_id||0,data:e.libs.aa,defaultValue:e.docData.pank+""||"",onChange:e.handleInputChange,ref:"select-aaId",readOnly:!t}),l.createElement(c,{title:"Maksepäev",name:"maksepaev",value:e.docData.maksepaev||"",ref:"input-maksepaev",onChange:e.handleInputChange,readOnly:!t}),l.createElement(u,{title:"Viitenumber",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenr",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:w.docRow},l.createElement(f,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:w.docRow},l.createElement(h,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:w.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:w.docRow},l.createElement("div",{style:w.docColumn},l.createElement(u,{title:"Kokku:",name:"summa",ref:"input-summa",value:e.docData.summa+""||"0.00",width:"auto",disabled:!0})),l.createElement("div",{style:w.docColumn},l.createElement(u,{title:"Määramata summa:",name:"mk_jaak",ref:"input-jaak",value:e.docData.jaak+""||"0.00",width:"auto",disabled:!0})))),l.createElement("div",{style:w.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null,l.createElement(g,{ref:"modalpageCreateOrder",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Kas koosta SMK",show:this.state.getSMK},"Kas koosta SMK?"),l.createElement("br",null),l.createElement("div",{style:w.docRow},l.createElement("label",{ref:"label"},k("Arved"))),l.createElement("div",{style:w.docRow},l.createElement(h,{source:"arved",gridData:a,gridColumns:r,showToolBar:!1,handleGridBtnClick:e.handleGridBtnClick,docTypeId:"arv",readOnly:!0,style:w.grid.headerTable,ref:"arved-data-grid"})))}},{key:"modalPageBtnClick",value:function(e){var t=this;if(this.setState({getSMK:!1}),"Ok"===e){var a=this.refs.document,r="/calc/koostaMK",n={docTypeId:D,module:this.props.module?this.props.module:E.module,userId:E.userData.userId,uuid:E.userData.uuid,docs:[+this.state.arvId],seisuga:a.docData&&a.docData.kpv?a.docData.kpv:null,context:E[r]?E[r]:null,taskName:"koostaMK"};a.fetchData("Post",r,{data:n}).then(function(e){if(e&&e.error_message)a.setState({warning:"viga: "+e.error_message,warningType:"error"});else if(e&&e.result){var r=e.data&&e.data&&e.data.result&&e.data.result.doc_id?e.data.result.doc_id:0;a.setState({warning:"Edukalt, suunatan ...",warningType:"ok"}),r&&setTimeout(function(){var e="/"+(t.props.module?t.props.module:E.module)+"/smk/"+r;t.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(e)})},2e3)}else a.setState({warning:"Tekkis viga",warningType:"error"})}).catch(function(e){a.setState({warning:"Viga "+e,warningType:"error"})})}}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];return r&&n.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(g,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Operatsioon",name:"nomid",data:e.libs.nomenclature,value:t.nomid||0,collId:"id",defaultValue:t.kood||"",ref:"nomid",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Partner",name:"asutusid",data:e.libs.asutused,value:t.asutusid,defaultValue:t.asutus||"",collId:"id",ref:"asutusid",onChange:e.handleGridRowChange}),l.createElement(v,{self:e,lib:"asutused"})),l.createElement("div",{style:w.docRow},l.createElement(u,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput})),l.createElement("div",{style:w.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Korr. konto",name:"konto",libs:"kontod",data:e.libs.kontod,value:t.konto,ref:"konto",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Tunnus:",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,value:t.tunnus,ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Project:",name:"proj",libs:"project",data:e.libs.project,value:t.proj,ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){if(e.gridRowData.nomid){var t=e.libs.nomenclature.find(function(t){return t.id===+e.gridRowData.nomid});t&&(e.gridRowData.kood=t.kood,e.gridRowData.nimetus=t.nimetus)}if(e.gridRowData.asutusid){var a=e.libs.asutused.find(function(t){return t.id===+e.gridRowData.asutusid});a&&(e.gridRowData.asutus=a.nimetus,e.gridRowData.aa||(e.gridRowData.aa=a.pank))}}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),t.gridRowData.asutusid||(e+=" Платильщик"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.PureComponent);O.propTypes={docId:d.number,initData:d.object,userData:d.object},O.defaultProps={initData:{},userData:{}},e.exports=O},292:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(11),d=a(163),s=a(79),u=a(175),c=(a(210),a(1)),p=a(293),m=a(10),f=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value?e.value:null,description:"",libData:e.data},a.handleSelectOnChange=a.handleSelectOnChange.bind(a),a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleSelectOnChange",value:function(e,t){var a=this;this.setState({value:t},function(){a.props.onChange(a.props.name,t)})}},{key:"handleClick",value:function(e){"edit"===e||"Muuda"===e?this.props.history.push({pathname:"/"+c.module+"/dokprops/"+this.state.value,state:{dokPropId:c.docTypeId,type:"text"}}):"add"!==e&&"Lisa"!==e||this.props.history.push({pathname:"/"+c.module+"/dokprops/0",state:{dokPropId:c.docTypeId,type:"text"}})}},{key:"getDescriptionBySelectValue",value:function(e){var t=this,a=e.filter(function(e){if(e.id===t.props.value)return e}),r="",n=a.length?a[0].details:"";for(var o in n)n.hasOwnProperty(o)&&(r=r+o+":"+n[o]);return r}},{key:"render",value:function(){return m.createElement("div",{style:p.wrapper},m.createElement(d,{className:this.props.className,ref:"select",title:this.props.title,name:this.props.name,data:this.props.data,collId:"id",value:this.state.value||"",defaultValue:this.props.defaultValue||"",placeholder:this.props.placeholder||this.props.title,readOnly:this.props.readOnly,onChange:this.handleSelectOnChange}),this.state.value?m.createElement(s,{value:"Muuda",show:this.props.readOnly,onClick:this.handleClick}):m.createElement(u,{value:"Lisa",show:this.props.readOnly,onClick:this.handleClick}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(m.PureComponent);f.propTypes={value:l.number,name:l.string.isRequired,title:l.string,libs:l.string,defaultValue:l.string,readOnly:l.bool,placeholder:l.string},f.defaultProps={readOnly:!1,title:""},e.exports=f},293:function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},input:{width:"70%",marginLeft:"5px",borderRadius:"5px"},a:{width:"70%",marginLeft:"5px",borderRadius:"5px"},hide:{display:"none"},select:{width:"70%",heigth:"100%",marginLeft:"5px",borderRadius:"5px",":focus":{backgroundColor:"lightpink"}},readOnly:{backgroundColor:"#F3EFEF"},label:{width:"30%",margin:"5px"},button:{width:"5%"}}},294:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=(a(11),a(10)),d=a(74),s=a(75),u="refresh",c=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick)return this.props.onClick();if(this.props.self&&this.props.self.loadLibs&&this.props.lib){var t=this.props.self;t.loadLibs(this.props.lib)}}},{key:"render",value:function(){var e=this;return l.createElement(s,{ref:"btnUuenda",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:d.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},295:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},296:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),p=a(232),m=a(163),f=(a(259),a(79)),h=a(210),y=a(174),g=a(261),b=a(178),v=a(297),w=(a(76),"SORDER"),k=a(1),D=a(167),E=a(168),C=a(85).SORDER.LIB_OBJS,O=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loadedData:!1,docId:e.docId?e.docId:+e.match.params.docId,lapsId:null,isAskToCreateFromArv:!0,getSMK:!1,arvId:0},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.btnEditAsutusClick=a.btnEditAsutusClick.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.modalPageBtnClick=a.modalPageBtnClick.bind(a),a.pages=[{pageName:"Sissetuliku kassaorder",docTypeId:"SORDER"}],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:w,history:this.props.history,initData:this.props.initData,module:this.state.module,reload:!0,libs:C,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=(e.docData&&e.docData.bpm?e.docData.bpm:[],e.state.edited);e.docData.relations&&g(e);var a=[];e.docData.asutusid&&e.docData.asutusid>0&&(a=e.libs.arv.filter(function(t){return t.asutusid==e.docData.asutusid}));!e.docData.id||0==e.docData.id;e.docData.id&&0!=e.docData.id||!e.docData.arvid||!this.state.isAskToCreateFromArv||this.setState({getSMK:!0,isAskToCreateFromArv:!1,arvId:e.docData.arvid});var r=D.ASUTUSED?D.ASUTUSED:[],n=k.userData?k.userData.roles:[];return l.createElement("div",{style:v.doc},l.createElement("div",{style:v.docRow},l.createElement("div",{style:v.docColumn},l.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:v.docRow},l.createElement("div",{style:v.docColumn},l.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(m,{title:"Kassa",name:"kassa_id",libs:"kassa",value:e.docData.kassa_id,data:e.libs.kassa,defaultValue:e.docData.kassa+""||"",ref:"select-kassaId",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:v.docRow},l.createElement("div",{style:v.docColumn},l.createElement(m,{title:"Raha saaja",libs:"asutused",name:"asutusid",data:e.libs.asutused,value:e.docData.asutusid||0,defaultValue:e.docData.asutus,onChange:e.handleInputChange,collId:"id",readOnly:!t})),E(n,r,"edit")?l.createElement("div",{style:v.docColumn},l.createElement(f,{ref:"btnEdit",value:"Muuda",onClick:this.btnEditAsutusClick,show:!t,style:v.btnEdit,disabled:!1})):null),l.createElement("div",{style:v.docRow},l.createElement("div",{style:v.docColumn},l.createElement(m,{title:"Arve nr",libs:"arv",name:"arvid",data:a,value:e.docData.arvid||0,defaultValue:e.docData.arvnr,onChange:e.handleInputChange,collId:"id",readOnly:!t}),l.createElement(u,{title:"Dokument",name:"dokument",value:e.docData.dokument||"",ref:"input-dokument",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:v.docRow},l.createElement(h,{title:"Nimi",name:"nimi",ref:"textarea-nimi",value:e.docData.nimi||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:v.docRow},l.createElement(h,{title:"Aadress",name:"aadress",ref:"textarea-aadress",value:e.docData.aadress||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:v.docRow},l.createElement(h,{title:"Alus",name:"alus",ref:"textarea-alus",value:e.docData.alus||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:v.docRow},l.createElement(y,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:v.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:v.docRow},l.createElement(p,{title:"Summa",name:"summa",ref:"input-summa",value:+e.docData.summa||0,width:"auto",disabled:!0})),l.createElement("div",{style:v.docRow},l.createElement(h,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null,l.createElement(b,{ref:"modalpageCreateOrder",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Kas koosta SORDER",show:this.state.getSMK},"Kas koosta kassaorder?"))}},{key:"btnEditAsutusClick",value:function(){var e=this.refs.document.docData.asutusid;this.props.history.push("/"+k.module+"/asutused/"+e)}},{key:"modalPageBtnClick",value:function(e){var t=this;if(this.setState({getSMK:!1}),"Ok"===e){var a=this.refs.document,r="/calc/koostaSorder",n={docTypeId:w,module:this.props.module?this.props.module:k.module,
userId:k.userData.userId,uuid:k.userData.uuid,docs:[+this.state.arvId],seisuga:a.docData&&a.docData.kpv?a.docData.kpv:null,context:k[r]?k[r]:null,taskName:"koostaSorder"};a.fetchData("Post",r,{data:n}).then(function(e){if(e&&e.error_message)a.setState({warning:"viga: "+e.error_message,warningType:"error"});else if(e&&e.result){var r=e.data&&e.data&&e.data.result&&e.data.result.doc_id?e.data.result.doc_id:0;r&&r>0?(a.setState({warning:"Edukalt, suunatan ...",warningType:"ok"}),r&&setTimeout(function(){var e="/"+(t.props.module?t.props.module:k.module)+"/"+w+"/"+r;t.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(e)})},2e3)):a.setState({warning:"Tekkis viga",warningType:"error"})}})}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){var t=e.libs.nomenclature.filter(function(t){if(t.id===e.gridRowData.nomid)return t});e.gridRowData.nomid&&(e.gridRowData.kood=t[0].kood,e.gridRowData.nimetus=t[0].name)}}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];return r&&n.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(b,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},e.state.gridWarning.length?l.createElement("div",{style:v.docRow},l.createElement("span",null,e.state.gridWarning)):null,l.createElement("div",{style:v.docRow},l.createElement(m,{title:"Teenus",name:"nomid",libs:"nomenclature",data:e.libs.nomenclature,value:t.nomid||0,defaultValue:t.kood||"",ref:"nomid",placeholder:"Teenuse kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:v.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa||0,bindData:!1,ref:"summa",onChange:e.handleGridRowInput}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}}]),t}(l.PureComponent);O.propTypes={docId:d.number,initData:d.object,userData:d.object},O.defaultProps={initData:{},userData:{}},e.exports=O},297:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},btnEdit:{width:"min-content"}}},298:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=(a(11),a(1),a(40),a(81),a(299)),s=a(274),u=a(276),c=a(254),p=a(256),m=a(250),f=a(252),h=a(258),y=a(269),g=a(267),b=a(301),v=a(296),w=a(303),k=a(305),D=a(310),E=a(291),C=a(315),O=a(317),R=a(319),_=a(264),x=a(282),j=a(284),I=a(5),P=I.Route,T=a(87),S=T.StyleRoot,G="raama",V=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.prepareParamsForToolbar=a.prepareParamsForToolbar.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this;this.prepareParamsForToolbar();return l.createElement(S,null,l.createElement(P,{exact:!0,path:"/raama",render:function(t){return l.createElement(d,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/asutused/:docId",component:u}),l.createElement(P,{exact:!0,path:"/raama/asutused",render:function(t){return l.createElement(s,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/objekt/:docId",component:c}),l.createElement(P,{exact:!0,path:"/raama/objekt",render:function(t){return l.createElement(p,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/arv/:docId",component:g,module:G}),l.createElement(P,{exact:!0,path:"/raama/arv",render:function(t){return l.createElement(y,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/sorder/:docId",component:v,module:G}),l.createElement(P,{exact:!0,path:"/raama/sorder",render:function(t){return l.createElement(b,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/vorder/:docId",component:k,module:G}),l.createElement(P,{exact:!0,path:"/raama/vorder",render:function(t){return l.createElement(w,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/smk/:docId",component:E,module:G}),l.createElement(P,{exact:!0,path:"/raama/smk",render:function(t){return l.createElement(D,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/vmk/:docId",component:O,module:G}),l.createElement(P,{exact:!0,path:"/raama/vmk",render:function(t){return l.createElement(C,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/leping/:docId",component:h,module:G}),l.createElement(P,{exact:!0,path:"/raama/leping",render:function(t){return l.createElement(_,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/andmed/:docId",component:x,module:G}),l.createElement(P,{exact:!0,path:"/raama/andmed",render:function(t){return l.createElement(j,{history:t.history,initData:e.props.initData,module:G})}}),l.createElement(P,{exact:!0,path:"/raama/nomenclature/:docId",component:m}),l.createElement(P,{exact:!0,path:"/raama/nomenclature",render:function(t){return l.createElement(f,{history:t.history,module:G,initData:e.props.initData})}}),l.createElement(P,{exact:!0,path:"/raama/kaive_aruanne",render:function(t){return l.createElement(R,{history:t.history,module:G,initData:e.props.initData})}}))}},{key:"prepareParamsForToolbar",value:function(){return{btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}}}}]),t}(l.Component);e.exports=V},299:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(300),u="RAAMA",c=a(85).TEATIS.toolbarProps,p=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.btnEditClick=a.btnEditClick.bind(a),a.renderer=a.renderer.bind(a),a.data=[],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:u,style:s,btnEditClick:this.btnEditClick,toolbarProps:c,render:this.renderer})}},{key:"renderer",value:function(e){return e.gridData&&(this.data=e.gridData),null}},{key:"btnEditClick",value:function(e){var t=this.data.findIndex(function(t){return t.id==e});if(t>-1){var a=this.data[t].doc_type_id;return this.props.history.push({pathname:"/raama/"+a+"/"+e,state:{module:this.props.module}})}}}]),t}(l.PureComponent);e.exports=p},300:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},301:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(232),u=a(272),c=a(302),p="SORDER",m=(a(1),function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a.state={summa:0,read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:p,style:c,render:this.renderer}),l.createElement(s,{title:"Read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(s,{title:"Summa kokku:",name:"summa_kokku",style:c.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){var t=e.gridData?u(e.gridData,"summa"):0;return t&&this.setState({summa:t,read:e.gridData.length}),null}}]),t}(l.PureComponent));e.exports=m},302:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},303:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(304),u="VORDER",c=a(232),p=a(272),m=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a.state={summa:0,read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:u,style:s,render:this.renderer}),l.createElement(c,{title:"Read kokku:",name:"read_kokku",style:s.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(c,{title:"Summa kokku:",name:"summa_kokku",style:s.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){var t=e.gridData?p(e.gridData,"summa"):0;return t&&this.setState({summa:t,read:e.gridData.length}),null}}]),t}(l.PureComponent);e.exports=m},304:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},total:{width:"auto"}}},305:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),p=a(232),m=(a(306),a(163)),f=a(210),h=a(174),y=(a(292),a(261)),g=a(178),b=a(309),v="VORDER",w=a(85)[v].LIB_OBJS,k=(new Date,function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loadedData:!1,docId:e.docId?e.docId:+e.match.params.docId},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.pages=[{pageName:"Väljamakse kassaorder"}],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:v,initData:this.props.initData,reload:!0,libs:w,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=(e.docData&&e.docData.bpm?e.docData.bpm:[],e.state.edited);e.docData.relations&&y(e);var a=this.refs.document;a?a.libs:{};return l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev ",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(m,{title:"Kassa",name:"kassa_id",libs:"kassa",value:e.docData.kassa_id,data:e.libs.kassa,defaultValue:e.docData.kassa||"",ref:"select-kassaId",onChange:e.handleInputChange,readOnly:!t}),l.createElement(m,{title:"Partner",name:"asutusid",data:e.libs.asutused,libs:"asutused",value:e.docData.asutusid,defaultValue:e.docData.asutus||"",onChange:e.handleInputChange,ref:"select-asutusId",readOnly:!t}),l.createElement(u,{title:"Arve nr.",name:"arvnr",value:e.docData.arvnr||"",ref:"input-arvnr",onChange:e.handleInputChange,readOnly:!0}),l.createElement(u,{title:"Dokument ",name:"dokument",value:e.docData.dokument||"",ref:"input-dokument",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Nimi",name:"nimi",ref:"textarea-nimi",value:e.docData.nimi||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Aadress",name:"aadress",ref:"textarea-aadress",value:e.docData.aadress||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Alus",name:"alus",ref:"textarea-alus",value:e.docData.alus||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(h,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,style:b.grid.headerTable,readOnly:!t,ref:"data-grid"})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Summa: ",name:"summa",ref:"input-summa",value:(e.docData.summa||0)+"",width:"auto",disabled:!0})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null))}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];if(r&&n.splice(0,1),!t)return l.createElement("div",null);var o=[];return o=e.libs.nomenclature.filter(function(e){if(!e.dok||e.dok===v)return e}),l.createElement("div",{className:".modalPage"},l.createElement(g,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:b.docRow},l.createElement(m,{title:"Teenus",name:"nomid",libs:"nomenclature",data:o,value:t.nomid,defaultValue:t.kood||"",collId:"id",ref:"nomid",placeholder:"Teenuse kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:b.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa||0,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:b.docRow},l.createElement(m,{title:"Tunnus:",name:"tunnus",data:e.libs.tunnus,value:t.tunnus||"",ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:b.docRow},l.createElement(m,{title:"Project:",name:"proj",data:e.libs.project,value:t.proj||"",ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a))))}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){var t=e.libs.nomenclature.filter(function(t){if(t.id===e.gridRowData.nomid)return t});e.gridRowData.nomid&&(e.gridRowData.kood=t[0].kood,e.gridRowData.nimetus=t[0].name)}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.PureComponent));k.propTypes={docId:d.number,initData:d.object,userData:d.object},k.defaultProps={initData:{},userData:{}},e.exports=k},306:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(11),d=a(10),s=a(206),u=a(307),c=a(308),p=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={readOnly:e.readOnly},a}return o(t,e),i(t,[{key:"render",value:function(){return d.createElement("div",{ref:"wrapper",style:c.wrapper},d.createElement(s,{ref:"id",title:"Id",name:"id",value:this.props.data.id+"",disabled:!0,width:"75%"}),d.createElement(u,{ref:"created",title:"Created",name:"created",value:this.props.data.created,disabled:!0,width:"75%"}),d.createElement(u,{ref:"lastupdate",title:"Updated",name:"lastupdate",value:this.props.data.lastupdate,disabled:!0,width:"75%"}),d.createElement(s,{ref:"status",title:"Status",name:"status",value:this.props.data.status,disabled:!0,width:"75%"}))}}]),t}(d.PureComponent);p.propTypes={readOnly:l.bool,data:l.object.isRequired},p.defaultProps={readOnly:!0,data:[]},e.exports=p},307:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(11),d=a(87),s=a(10),u=a(231),c=(new Date).toLocaleDateString(),p=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"",readOnly:e.readOnly},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value,readOnly:e.readOnly})}},{key:"onChange",value:function(e){var t=e.target.value,a=this.validate(t);null==t&&(a=!0),a&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(this.props.name,t))}},{key:"render",value:function(){var e=this.props.placeholder||this.props.title;Object.assign({},u.input,this.props.width?{width:this.props.width}:{},this.state.readOnly?u.readOnly:{});return s.createElement("div",{style:u.wrapper},s.createElement("label",{style:u.label,htmlFor:this.props.name,ref:"label"},this.props.title),s.createElement("input",{type:"datetime",style:u.input,name:this.props.name,ref:"input",value:this.state.value,readOnly:this.state.readOnly,title:this.props.title,pattern:this.props.pattern,placeholder:e,min:this.props.min,max:this.props.max,onChange:this.onChange,disabled:this.props.disabled}))}},{key:"validate",value:function(e){var t=!0;if(this.props.min&&this.props.max&&e){var a=new Date(e);t=a>this.props.min&&a<this.props.max}return t}},{key:"focus",value:function(){this.refs.input.focus()}}]),t}(s.PureComponent);p.propTypes={name:l.string.isRequired,value:l.string,min:l.string,max:l.string,readOnly:l.bool,disabled:l.bool,valid:l.bool,pattern:l.string,width:l.string,title:l.string,placeholder:l.string},p.defaultProps={readOnly:!1,disabled:!1,valid:!0,value:c+"",title:""},e.exports=d(p)},308:function(e,t){"use strict";e.exports={wrapper:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"flex-start"}}},309:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},310:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(311),u="SMK",c=a(312),p=a(314),m=a(71),f=a(232),h=(a(272),a(168)),y=a(1),g=a(167),b=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a.handleClick=a.handleClick.bind(a),a.state={summa:0,read:0,isReport:!1,txtReport:[]},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:u,style:s,render:this.renderer}),l.createElement(f,{title:"Read kokku:",name:"read_kokku",style:s.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(f,{title:"Summa kokku:",name:"summa_kokku",style:s.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e)return null;var t=g[u]?g[u]:[],a=y.userData?y.userData.roles:[],r=e.gridData&&e.gridData.length?e.gridData[0].deebet_total:0;return this.setState({summa:r,read:e.gridData.length}),l.createElement(m,null,h(a,t,"import")?l.createElement(c,{ref:"btnUpload",docTypeId:u,onClick:this.handleClick,show:!0,mimeTypes:".csv,.xml"}):null,l.createElement(p,{history:e.props.history?e.props.history:null,ref:"btnLogs",value:"Panga VV logid"}))}},{key:"handleClick",value:function(){var e=this.refs.register;setTimeout(function(){e.fetchData("selectDocs")},1e3)}}]),t}(l.PureComponent);e.exports=b},311:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},312:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(11),d=a(41),s=a(1),u=a(10),c=a(313),p=a(75),m=a(178),f=a(208),h=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:!1,selectedFile:null,response:null,loading:!1,isReport:!1,txtReport:[]},a.modalPageClick=a.modalPageClick.bind(a),a.onChangeHandler=a.onChangeHandler.bind(a),a.handleClick=a.handleClick.bind(a),a.fecthData=a.fecthData.bind(a),a.modalReportePageBtnClick=a.modalReportePageBtnClick.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return this.state.show?this.modalPage():u.createElement("div",null,u.createElement(p,{ref:"btnUpload",value:this.props.value?this.props.value:"Import",show:!0,onClick:function(t){return e.handleClick(t)}},u.createElement("img",{ref:"image",src:c.button.icon})),u.createElement(f,{show:this.state.isReport,report:this.state.txtReport,modalPageBtnClick:this.modalReportePageBtnClick}))}},{key:"handleClick",value:function(){this.setState({show:!0})}},{key:"modalPage",value:function(){var e=this.state.loading?["btnCancel"]:["btnOk","btnCancel"],t=this.props.mimeTypes?this.props.mimeTypes:".csv, .xml";return u.createElement("div",null,u.createElement(m,{modalObjects:e,ref:"modalpage-upload",show:!0,modalPageBtnClick:this.modalPageClick,modalPageName:"Import"},u.createElement("div",{style:c.docRow},u.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler,accept:t})),u.createElement("div",null,this.state.response?u.createElement("span",null,this.state.response):null)))}},{key:"modalPageClick",value:function(e){var t=this;"Ok"===e?(this.state.selectedFile?(this.setState({loading:!0}),this.fecthData().then(function(e){var a="";e.data&&e.data.error_message?(a=e.data.error_message,t.props.onClick&&t.props.onClick(e.data),t.setState({show:!1,loading:!1,isReport:!0,txtReport:e.data&&e.data.data?e.data.data:[]})):(a=e.data,t.setState({response:a},function(){setTimeout(function(){t.setState({response:null,show:!1,loading:!1})},1e3)}))})):this.setState({response:null,show:!1,loading:!1}),this.props.onClick&&this.props.onClick()):this.setState({response:null,show:!1,loading:!1})}},{key:"onChangeHandler",value:function(e){this.setState({selectedFile:e.target.files[0]})}},{key:"fecthData",value:function(){var e=({parameter:this.props.docTypeId,uuid:s.userData.uuid},new FormData);return e.append("file",this.state.selectedFile),e.append("uuid",s.userData.uuid),e.append("docTypeId",this.props.docTypeId),d.fetchDataPost("/newApi/upload/",e)}},{key:"modalReportePageBtnClick",value:function(e){var t=!e||"Ok"!=e;this.setState({isReport:t})}}]),t}(u.PureComponent);h.propTypes={show:l.bool},h.defaultProps={show:!1},e.exports=h},313:function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},button:{icon:"/images/icons/import.png",width:"10%"}}},314:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(1),u=a(74),c=a(75),p="info",m=a(76),f=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"Logid"
},a}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick)return this.props.onClick("logid");var t=s.menu.find(function(e){return e.kood.toUpperCase()==="pank_vv".toUpperCase()});t||(s.pageName=t?t.name:"Panga väljavõtte"),this.props.history.push({pathname:"/"+s.module+"/pank_vv",state:{module:s.module}})}},{key:"render",value:function(){var e=this;return l.createElement(c,{value:m(this.state.value),ref:"btnLogid",style:u.button,show:!this.props.show||this.props.show,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:u.icons[p]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(l.PureComponent);f.propTypes={value:d.string},f.defaultProps={disabled:!1,show:!0,value:"Logid"},e.exports=f},315:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(232),u=a(272),c=a(316),p=a(1),m=a(71),f=a(271),h="VMK",y=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={summa:0,read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,ref:"register",history:this.props.history?this.props.history:null,docTypeId:h,module:this.props.module,style:c,render:this.renderer}),l.createElement(s,{title:"Read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(s,{title:"Summa kokku:",name:"summa_kokku",style:c.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){var t=e.gridData?u(e.gridData,"kreedit"):0;return t&&this.setState({summa:t,read:e.gridData.length}),l.createElement(m,null,l.createElement(f,{onClick:this.onClickHandler,phrase:"Kas laadida XML fail?",ref:"btnSepaXML",value:"Saama XML (SEPA) kõik valitud maksed"}))}},{key:"onClickHandler",value:function(e){var t=new Set,a=this.refs.register;if(a.gridData.forEach(function(e){t.add(e.id)}),t=Array.from(t),t.length){a.setState({warning:"Leidsin "+t.length+" maksed",warningType:"ok"});var r="/sepa/"+p.userData.uuid+"/"+t;window.open(""+r)}else a.setState({warning:"Mitte ühtegi makse leidnum",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=y},316:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},317:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),p=a(232),m=a(163),f=(a(259),a(79),a(210)),h=a(174),y=(a(292),a(261)),g=a(178),b=a(237),v=a(294),w=a(318),k=[{id:"aa",filter:""},{id:"asutused",filter:"where id in (select asutusid from lapsed.vanemad)"},{id:"nomenclature",filter:"where dok in ('VMK','MK')"}],D=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1,module:a.props.module},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.pages=[{pageName:"Väljamakse korraldus",docTypeId:"SMK"}],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:"VMK",module:"lapsed",reload:!0,history:this.props.history,initData:this.props.initData,libs:k,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=e.state.edited;return e&&e.docData&&e.docData.kpv?(e.docData.relations&&y(e),l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:w.docRow},l.createElement("div",{style:w.docColumn},l.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev ",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(m,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:+e.docData.aa_id||0,data:e.libs.aa,defaultValue:e.docData.pank+""||e.libs.aa,collId:"id",onChange:e.handleInputChange,ref:"select-aaId",readOnly:!t}),l.createElement(u,{title:"Arve nr.",name:"arvnr",value:e.docData.arvnr||"",ref:"input-arvnr",onChange:e.handleInputChange,readOnly:!0}),l.createElement(c,{title:"Maksepäev ",name:"maksepaev",value:e.docData.maksepaev,ref:"input-maksepaev",onChange:e.handleInputChange,readOnly:!t}),l.createElement(u,{title:"Viitenumber ",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenr",onChange:e.handleInputChange,readOnly:!t})))),l.createElement("div",{style:w.docRow},l.createElement(f,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:w.docRow},l.createElement(h,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:w.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:w.docRow},l.createElement(u,{title:"Kokku: ",name:"summa",ref:"input-summa",value:e.docData.summa+""||"0.00",width:"auto",disabled:!0})),l.createElement("div",{style:w.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null)):l.createElement("div",{style:w.doc},l.createElement(b,{label:"Laadimine..."}))}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];if(r&&n.splice(0,1),!t)return l.createElement("div",null);var o=e.libs.nomenclature.filter(function(e){if("MK"===e.dok||"VMK"===e.dok)return e});return l.createElement("div",{className:".modalPage"},l.createElement(g,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Operatsioon",name:"nomid",data:o,value:t.nomid||0,collId:"id",defaultValue:t.kood||"",ref:"nomid",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Partner",name:"asutusid",data:e.libs.asutused,value:t.asutusid,defaultValue:t.asutus||"",collId:"id",ref:"asutusid",onChange:e.handleGridRowChange}),l.createElement(v,{self:e,lib:"asutused"})),l.createElement("div",{style:w.docRow},l.createElement(u,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput})),l.createElement("div",{style:w.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Korr. konto",name:"konto",libs:"kontod",data:e.libs.kontod,value:t.konto,ref:"konto",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Tunnus:",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,value:t.tunnus,ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:w.docRow},l.createElement(m,{title:"Project:",name:"proj",libs:"project",data:e.libs.project,value:t.proj,ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a))))}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){if(e.gridRowData.nomid){var t=e.libs.nomenclature.find(function(t){return t.id===+e.gridRowData.nomid});t&&(e.gridRowData.kood=t.kood,e.gridRowData.nimetus=t.nimetus)}if(e.gridRowData.asutusid){var a=e.libs.asutused.find(function(t){return t.id===+e.gridRowData.asutusid});a&&(e.gridRowData.asutus=a.nimetus,!e.gridRowData.aa&&a.pank&&(e.gridRowData.aa=a.pank))}}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),t.gridRowData.asutusid||(e+=" Платильщик"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.Component);D.propTypes={docId:d.number,initData:d.object,userData:d.object},D.defaultProps={initData:{},userData:{}},e.exports=D},318:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},btnEdit:{width:"min-content"}}},319:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=(a(266),a(71),a(232)),u=a(206),c=(a(237),a(320)),p="KAIVE_ARUANNE",m={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},f=a(1),h=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={alg_saldo:0,arvestatud:0,laekumised:0,tagastused:0,jaak:0,read:0,filtri_read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",toolbarProps:m,docTypeId:p,style:c,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read||0,disabled:!0}),l.createElement(s,{title:"Alg.saldo kokku:",name:"alg_saldo_kokku",style:c.total,ref:"input-read",value:+this.state.alg_saldo||0,disabled:!0}),l.createElement(s,{title:"Arvestatud kokku:",name:"arvestatud_kokku",style:c.total,ref:"input-arvestatud",value:+this.state.arvestatud||0,disabled:!0}),l.createElement(s,{title:"Laekumised kokku:",name:"laekumised_kokku",style:c.total,ref:"input-laekumised",value:+this.state.laekumised||0,disabled:!0}),l.createElement(s,{title:"Tagastused kokku:",name:"tagastused_kokku",style:c.total,ref:"input-tagastused",value:+this.state.tagastused||0,disabled:!0}),l.createElement(s,{title:"Jääk kokku:",name:"jaak_kokku",style:c.total,ref:"input-jaak",value:+this.state.jaak||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e||!e.gridData||!e.gridData.length)return null;var t=e.gridData?e.gridData[0].alg_saldo_total:0,a=e.gridData?e.gridData[0].arvestatud_total:0,r=e.gridData?e.gridData[0].laekumised_total:0,n=e.gridData?e.gridData[0].tagastused_total:0,o=e.gridData?e.gridData[0].jaak_total:0,i=e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:0,l=e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0;this.setState({alg_saldo:t,arvestatud:a,laekumised:r,tagastused:n,jaak:o,read:i,filtri_read:l})}},{key:"onClickHandler",value:function(){var e=this.refs.register;if(e.gridData&&e.gridData.length){var t=e.state.sqlWhere,a="/reports/kaive_aruanne/"+f.userData.uuid,r=encodeURIComponent(""+t),n=encodeURIComponent(""+JSON.stringify(e.filterData)),o=t?a+"/"+n+"/"+r:a+"/"+n;window.open(o)}else e.setState({warning:"Mitte ühtegi kirjed leidnud",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=h},320:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"100px",margin:"0px 0px 0px 5px"}}}});