var kasutaja=webpackJsonp_name_([2],{0:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(1),o=r(n),i=a(4),l=a(5),d=l.BrowserRouter,s=a(284);initData=JSON.parse(initData),userData=JSON.parse(userData),o.default.initData=initData,o.default.userData=userData,o.default.module="kasutaja",o.default.pageName="Kasutaja",o.default.gridConfig=initData.docConfig,o.default.menu=initData.menu?initData.menu.data:[],o.default.keel="EST",i.hydrate(React.createElement(d,null,React.createElement(s,{initData:initData,userData:userData})),document.getElementById("doc"))},284:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(10),s=(a(11),a(1)),u=(a(40),a(81),a(285)),c=a(237),m=a(239),p=a(250),h=a(252),f=a(254),y=a(260),g=a(263),v=a(265),b=a(289),k=a(294),w=a(280),D=a(282),E=a(5),C=E.Route,R=a(87),O=R.StyleRoot,_="kasutaja",j=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.prepareParamsForToolbar=a.prepareParamsForToolbar.bind(a),a}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return d.createElement(O,null,d.createElement(C,{path:"/redirect",component:function(){return window.open("http://"+s.link,"_blank"),null}}),d.createElement(C,{exact:!0,path:"/kasutaja",render:function(t){return d.createElement(u,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/kasutaja",render:function(t){return d.createElement(u,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/taotlus_login",render:function(t){return d.createElement(c,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/taotlus_login/:docId",render:function(e){return d.createElement(m,i({},e,{module:_,history:e.history}))}}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_objekt/:docId",component:p}),d.createElement(C,{exact:!0,path:"/kasutaja/objekt",render:function(t){return d.createElement(h,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_leping/:docId",component:f}),d.createElement(C,{exact:!0,path:"/kasutaja/leping/:docId",component:f}),d.createElement(C,{exact:!0,path:"/kasutaja/leping",render:function(t){return d.createElement(y,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_leping",render:function(t){return d.createElement(y,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_arv/:docId",component:g}),d.createElement(C,{exact:!0,path:"/kasutaja/arv/:docId",component:g}),d.createElement(C,{exact:!0,path:"/kasutaja/arv",render:function(t){return d.createElement(v,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/smk/:docId",component:b,module:_}),d.createElement(C,{exact:!0,path:"/kasutaja/sorder/:docId",component:k,module:_}),d.createElement(C,{exact:!0,path:"/kasutaja/andmed/:docId",component:w}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_andmed/:docId",component:w}),d.createElement(C,{exact:!0,path:"/kasutaja/isiku_andmed",render:function(t){return d.createElement(D,{history:t.history,initData:e.props.initData,module:_})}}),d.createElement(C,{exact:!0,path:"/kasutaja/andmed",render:function(t){return d.createElement(D,{history:t.history,initData:e.props.initData,module:_})}}))}},{key:"prepareParamsForToolbar",value:function(){return{btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}}}}]),t}(d.Component);e.exports=j},285:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(170),s=a(71),u=a(286),c=a(75),m=(a(1),a(288)),p="KASUTAJA",h=a(85).TEATIS.toolbarProps,f=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.btnEditClick=a.btnEditClick.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.data=[],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(d,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:p,style:m,btnEditClick:this.btnEditClick,toolbarProps:h,render:this.renderer}),l.createElement("br",null),l.createElement(s,{position:"left",container:{border:"1px solid lightGrey"}},l.createElement(u,{history:this.props.history})))}},{key:"renderer",value:function(e){return l.createElement(s,null,l.createElement(c,{onClick:this.onClickHandler,value:"Lisa andmed"}))}},{key:"onClickHandler",value:function(){this.props.history.push("/kasutaja/ANDMED/0")}},{key:"btnEditClick",value:function(e){var t=this.refs.register,a=t.gridData.filter(function(t){return t.id==e});if(a){var r=a[0].doc_type_id;return this.props.history.push({pathname:"/"+this.props.module+"/"+r+"/"+a[0].id,state:{module:this.props.module}})}}}]),t}(l.PureComponent);e.exports=f},286:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=(a(11),a(41)),d=a(1),s=a(10),u=a(287),c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.docId=null,a.state={nimetus:null,link:null},a.interval=null,a.fetchData=a.fetchData.bind(a),a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.fetchData()},1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return s.createElement("div",{style:u.frame},this.state.nimetus?s.createElement("a",{href:this.state.link,target:"_blank"}," ",this.state.nimetus," "):null)}},{key:"fetchData",value:function(e,t){var a=this,r="/newApi";t&&(r=t);var n={link:t,parameter:"REKL",method:"selectDocs",sortBy:[{column:"last_shown",direction:"asc"}],limit:1,sqlWhere:"where (format_date(alg_kpv)::date <= current_date or format_date(lopp_kpv)::date >= current_date) AND docs.update_last_rekl(id) = 1",module:"juht",userId:d.userData.userId,uuid:d.userData.uuid};return new Promise(function(e,o){t?l.fetchDataGet(r):l.fetchDataPost(r,n).then(function(t){if(t.status&&401===t.status&&(document.location="/login"),200!==t.status)return{result:null,status:t.status,error_message:"error "+(t.data&&t.data.error_message?"response.data.error_message":t.error_message)};var r=t.data.result.data[0];a.setState({nimetus:r.nimetus,link:r.link}),e(t.data)})}).catch(function(e){})}}]),t}(s.PureComponent);e.exports=c},287:function(e,t){"use strict";e.exports={frame:{width:"100%"}}},288:function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},frame:{justifyContent:"flex-start",border:"1px solid lightGrey"}}},289:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),m=a(232),p=a(163),h=(a(255),a(210)),f=a(174),y=(a(290),a(257)),g=a(178),v=a(240),b=a(292),k=a(293),w=a(76),D="SMK",E=a(1),C=[{id:"nomenclature",filter:"where dok in ('MK','SMK')"},{id:"asutused",filter:""},{id:"aa",filter:""}],R=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1,lapsId:null,module:a.props.module,isAskToCreateFromArv:!0,getSMK:!1,arvId:0,kas_aa_kasitsi:!1},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.modalPageBtnClick=a.modalPageBtnClick.bind(a),a.pages=[{pageName:"Sissemakse korraldus",docTypeId:"SMK"}],a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){if(this.props.history&&this.props.history.location.state){var e=this.props.history.location.state.lapsId,t=this.props.history.location.state.module?this.props.history.location.state.module:"lapsed";this.setState({lapsId:e,module:t})}}},{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:D,history:this.props.history,module:this.state.module,initData:this.props.initData,reload:!0,libs:C,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){if(!e||!e.docData||!e.docData.kpv)return l.createElement("div",{style:k.doc},l.createElement(v,{label:w("Laadimine...")}));var t=e.state.edited;e.docData.relations&&y(e);!e.docData.id||0===e.docData.id;e.docData.id&&0!==e.docData.id||!e.docData.arvid||!this.state.isAskToCreateFromArv||this.setState({getSMK:!0,isAskToCreateFromArv:!1,arvId:e.docData.arvid});var a=e.docData.queryArvTasu,r=e.docData.gridArvConfig;return e.docData.jaak&&(E.mkJaak=e.docData.jaak),l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:k.docRow},l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Number",name:"number",value:(e.docData.number||"")+"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv||"01-07-2020",ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(p,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:+e.docData.aa_id||0,data:e.libs.aa,defaultValue:e.docData.pank+""||"",onChange:e.handleInputChange,ref:"select-aaId",readOnly:!t}),l.createElement(c,{title:"Maksepäev",name:"maksepaev",value:e.docData.maksepaev||"",ref:"input-maksepaev",onChange:e.handleInputChange,readOnly:!t}),l.createElement(u,{title:"Viitenumber",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenr",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:k.docRow},l.createElement(f,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:k.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:k.docRow},l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Kokku:",name:"summa",ref:"input-summa",value:e.docData.summa+""||"0.00",width:"auto",disabled:!0})),l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Määramata summa:",name:"mk_jaak",ref:"input-jaak",value:e.docData.jaak+""||"0.00",width:"auto",disabled:!0})))),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null,l.createElement(g,{ref:"modalpageCreateOrder",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Kas koosta SMK",show:this.state.getSMK},"Kas koosta SMK?"),l.createElement("br",null),l.createElement("div",{style:k.docRow},l.createElement("label",{ref:"label"},w("Arved"))),l.createElement("div",{style:k.docRow},l.createElement(f,{source:"arved",gridData:a,gridColumns:r,showToolBar:!1,handleGridBtnClick:e.handleGridBtnClick,docTypeId:"arv",readOnly:!0,style:k.grid.headerTable,ref:"arved-data-grid"})))}},{key:"modalPageBtnClick",value:function(e){var t=this;if(this.setState({getSMK:!1}),"Ok"===e){var a=this.refs.document,r="/calc/koostaMK",n={docTypeId:D,module:this.props.module?this.props.module:E.module,userId:E.userData.userId,uuid:E.userData.uuid,docs:[+this.state.arvId],seisuga:a.docData&&a.docData.kpv?a.docData.kpv:null,context:E[r]?E[r]:null,taskName:"koostaMK"};a.fetchData("Post",r,{data:n}).then(function(e){if(e&&e.error_message)a.setState({warning:"viga: "+e.error_message,warningType:"error"});else if(e&&e.result){var r=e.data&&e.data&&e.data.result&&e.data.result.doc_id?e.data.result.doc_id:0;a.setState({warning:"Edukalt, suunatan ...",warningType:"ok"}),r&&setTimeout(function(){var e="/"+(t.props.module?t.props.module:E.module)+"/smk/"+r;t.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(e)})},2e3)}else a.setState({warning:"Tekkis viga",warningType:"error"})}).catch(function(e){a.setState({warning:"Viga "+e,warningType:"error"})})}}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];return r&&n.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(g,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Operatsioon",name:"nomid",data:e.libs.nomenclature,value:t.nomid||0,collId:"id",defaultValue:t.kood||"",ref:"nomid",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Partner",name:"asutusid",data:e.libs.asutused,value:t.asutusid,defaultValue:t.asutus||"",collId:"id",ref:"asutusid",onChange:e.handleGridRowChange}),l.createElement(b,{self:e,lib:"asutused"})),l.createElement("div",{style:k.docRow},l.createElement(u,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(m,{title:"Summa: ",name:"summa",value:+t.summa,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Korr. konto",name:"konto",libs:"kontod",data:e.libs.kontod,value:t.konto,ref:"konto",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Tunnus:",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,value:t.tunnus,ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Project:",name:"proj",libs:"project",data:e.libs.project,value:t.proj,ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){if(e.gridRowData.nomid){var t=e.libs.nomenclature.find(function(t){return t.id===+e.gridRowData.nomid});t&&(e.gridRowData.kood=t.kood,e.gridRowData.nimetus=t.nimetus)}if(e.gridRowData.asutusid){var a=e.libs.asutused.find(function(t){return t.id===+e.gridRowData.asutusid});a&&(e.gridRowData.asutus=a.nimetus,e.gridRowData.aa||(e.gridRowData.aa=a.pank))}}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),t.gridRowData.asutusid||(e+=" Платильщик"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.PureComponent);R.propTypes={docId:d.number,initData:d.object,userData:d.object},R.defaultProps={initData:{},userData:{}},e.exports=R},290:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(11),d=a(163),s=a(79),u=a(175),c=(a(210),a(1)),m=a(291),p=a(10),h=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value?e.value:null,description:"",libData:e.data},a.handleSelectOnChange=a.handleSelectOnChange.bind(a),a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleSelectOnChange",value:function(e,t){var a=this;this.setState({value:t},function(){a.props.onChange(a.props.name,t)})}},{key:"handleClick",value:function(e){"edit"===e||"Muuda"===e?this.props.history.push({pathname:"/"+c.module+"/dokprops/"+this.state.value,state:{dokPropId:c.docTypeId,type:"text"}}):"add"!==e&&"Lisa"!==e||this.props.history.push({pathname:"/"+c.module+"/dokprops/0",state:{dokPropId:c.docTypeId,type:"text"}})}},{key:"getDescriptionBySelectValue",value:function(e){var t=this,a=e.filter(function(e){if(e.id===t.props.value)return e}),r="",n=a.length?a[0].details:"";for(var o in n)n.hasOwnProperty(o)&&(r=r+o+":"+n[o]);return r}},{key:"render",value:function(){return p.createElement("div",{style:m.wrapper},p.createElement(d,{className:this.props.className,ref:"select",title:this.props.title,name:this.props.name,data:this.props.data,collId:"id",value:this.state.value||"",defaultValue:this.props.defaultValue||"",placeholder:this.props.placeholder||this.props.title,readOnly:this.props.readOnly,onChange:this.handleSelectOnChange}),this.state.value?p.createElement(s,{value:"Muuda",show:this.props.readOnly,onClick:this.handleClick}):p.createElement(u,{value:"Lisa",show:this.props.readOnly,onClick:this.handleClick}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(p.PureComponent);h.propTypes={value:l.number,name:l.string.isRequired,title:l.string,libs:l.string,defaultValue:l.string,readOnly:l.bool,placeholder:l.string},h.defaultProps={readOnly:!1,title:""},e.exports=h},291:function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},input:{width:"70%",marginLeft:"5px",borderRadius:"5px"},a:{width:"70%",marginLeft:"5px",borderRadius:"5px"},hide:{display:"none"},select:{width:"70%",heigth:"100%",marginLeft:"5px",borderRadius:"5px",":focus":{backgroundColor:"lightpink"}},readOnly:{backgroundColor:"#F3EFEF"},label:{width:"30%",margin:"5px"},button:{width:"5%"}}},292:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=(a(11),a(10)),d=a(74),s=a(75),u="refresh",c=function(e){function t(e){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick)return this.props.onClick();if(this.props.self&&this.props.self.loadLibs&&this.props.lib){var t=this.props.self;t.loadLibs(this.props.lib)}}},{key:"render",value:function(){var e=this;return l.createElement(s,{ref:"btnUuenda",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:d.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},293:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},294:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(10),d=a(11),s=a(217),u=a(206),c=a(230),m=a(232),p=a(163),h=(a(255),a(79)),f=a(210),y=a(174),g=a(257),v=a(178),b=a(295),k=(a(76),"SORDER"),w=a(1),D=a(167),E=a(168),C=a(85).SORDER.LIB_OBJS,R=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loadedData:!1,docId:e.docId?e.docId:+e.match.params.docId,lapsId:null,isAskToCreateFromArv:!0,getSMK:!1,arvId:0},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.btnEditAsutusClick=a.btnEditAsutusClick.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.modalPageBtnClick=a.modalPageBtnClick.bind(a),a.pages=[{pageName:"Sissetuliku kassaorder",docTypeId:"SORDER"}],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{docId:this.state.docId,ref:"document",docTypeId:k,history:this.props.history,initData:this.props.initData,module:this.state.module,reload:!0,libs:C,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=(e.docData&&e.docData.bpm?e.docData.bpm:[],e.state.edited);e.docData.relations&&g(e);var a=[];e.docData.asutusid&&e.docData.asutusid>0&&(a=e.libs.arv.filter(function(t){return t.asutusid==e.docData.asutusid}));!e.docData.id||0==e.docData.id;e.docData.id&&0!=e.docData.id||!e.docData.arvid||!this.state.isAskToCreateFromArv||this.setState({getSMK:!0,isAskToCreateFromArv:!1,arvId:e.docData.arvid});var r=D.ASUTUSED?D.ASUTUSED:[],n=w.userData?w.userData.roles:[];return l.createElement("div",{style:b.doc},l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(p,{title:"Kassa",name:"kassa_id",libs:"kassa",value:e.docData.kassa_id,data:e.libs.kassa,defaultValue:e.docData.kassa+""||"",ref:"select-kassaId",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(p,{title:"Raha saaja",libs:"asutused",name:"asutusid",data:e.libs.asutused,value:e.docData.asutusid||0,defaultValue:e.docData.asutus,onChange:e.handleInputChange,collId:"id",readOnly:!t})),E(n,r,"edit")?l.createElement("div",{style:b.docColumn},l.createElement(h,{ref:"btnEdit",value:"Muuda",onClick:this.btnEditAsutusClick,show:!t,style:b.btnEdit,disabled:!1})):null),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(p,{title:"Arve nr",libs:"arv",name:"arvid",data:a,value:e.docData.arvid||0,defaultValue:e.docData.arvnr,onChange:e.handleInputChange,collId:"id",readOnly:!t}),l.createElement(u,{title:"Dokument",name:"dokument",value:e.docData.dokument||"",ref:"input-dokument",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Nimi",name:"nimi",ref:"textarea-nimi",value:e.docData.nimi||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Aadress",name:"aadress",ref:"textarea-aadress",value:e.docData.aadress||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Alus",name:"alus",ref:"textarea-alus",value:e.docData.alus||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:b.docRow},l.createElement(y,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:b.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:b.docRow},l.createElement(m,{title:"Summa",name:"summa",ref:"input-summa",value:+e.docData.summa||0,width:"auto",disabled:!0})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null,l.createElement(v,{ref:"modalpageCreateOrder",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Kas koosta SORDER",show:this.state.getSMK},"Kas koosta kassaorder?"))}},{key:"btnEditAsutusClick",value:function(){var e=this.refs.document.docData.asutusid;this.props.history.push("/"+w.module+"/asutused/"+e)}},{key:"modalPageBtnClick",value:function(e){var t=this;if(this.setState({getSMK:!1}),"Ok"===e){var a=this.refs.document,r="/calc/koostaSorder",n={docTypeId:k,module:this.props.module?this.props.module:w.module,userId:w.userData.userId,uuid:w.userData.uuid,docs:[+this.state.arvId],seisuga:a.docData&&a.docData.kpv?a.docData.kpv:null,context:w[r]?w[r]:null,taskName:"koostaSorder"};a.fetchData("Post",r,{data:n}).then(function(e){if(e&&e.error_message)a.setState({warning:"viga: "+e.error_message,warningType:"error"});else if(e&&e.result){var r=e.data&&e.data&&e.data.result&&e.data.result.doc_id?e.data.result.doc_id:0;r&&r>0?(a.setState({warning:"Edukalt, suunatan ...",warningType:"ok"}),r&&setTimeout(function(){var e="/"+(t.props.module?t.props.module:w.module)+"/"+k+"/"+r;t.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(e)})},2e3)):a.setState({warning:"Tekkis viga",warningType:"error"})}})}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){var t=e.libs.nomenclature.filter(function(t){if(t.id===e.gridRowData.nomid)return t});e.gridRowData.nomid&&(e.gridRowData.kood=t[0].kood,e.gridRowData.nimetus=t[0].name)}}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",r=a.length>0||!e.state.checked,n=["btnOk","btnCancel"];return r&&n.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(v,{modalObjects:n,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},e.state.gridWarning.length?l.createElement("div",{style:b.docRow},l.createElement("span",null,e.state.gridWarning)):null,l.createElement("div",{style:b.docRow},l.createElement(p,{title:"Teenus",name:"nomid",libs:"nomenclature",data:e.libs.nomenclature,value:t.nomid||0,defaultValue:t.kood||"",ref:"nomid",placeholder:"Teenuse kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:b.docRow},l.createElement(m,{
title:"Summa: ",name:"summa",value:+t.summa||0,bindData:!1,ref:"summa",onChange:e.handleGridRowInput}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}}]),t}(l.PureComponent);R.propTypes={docId:d.number,initData:d.object,userData:d.object},R.defaultProps={initData:{},userData:{}},e.exports=R},295:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},btnEdit:{width:"min-content"}}}});